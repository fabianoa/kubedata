apiVersion: v1
data:
  install.properties: |-
    # Licensed to the Apache Software Foundation (ASF) under one or more
    # contributor license agreements.  See the NOTICE file distributed with
    # this work for additional information regarding copyright ownership.
    # The ASF licenses this file to You under the Apache License, Version 2.0
    # (the "License"); you may not use this file except in compliance with
    # the License.  You may obtain a copy of the License at
    #
    #     http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.

    #
    # This file provides a list of the deployment variables for the Policy Manager Web Application
    #

    #------------------------- DB CONFIG - BEGIN ----------------------------------
    # Uncomment the below if the DBA steps need to be run separately
    #setup_mode=SeparateDBA

    PYTHON_COMMAND_INVOKER=python

    #DB_FLAVOR=MYSQL|ORACLE|POSTGRES|MSSQL|SQLA
    DB_FLAVOR=postgres
    #

    #
    # Location of DB client library (please check the location of the jar file)
    #
    #SQL_CONNECTOR_JAR=/usr/share/java/ojdbc6.jar
    #SQL_CONNECTOR_JAR=/usr/share/java/mysql-connector-java.jar
    SQL_CONNECTOR_JAR=/root/postgresql.jar
    #SQL_CONNECTOR_JAR=/usr/share/java/sqljdbc4.jar
    #SQL_CONNECTOR_JAR=/opt/sqlanywhere17/java/sajdbc4.jar
    #SQL_CONNECTOR_JAR=/usr/share/java/mysql-connector-java.jar


    #
    # DB password for the DB admin user-id
    # **************************************************************************
    # ** If the password is left empty or not-defined here,
    # ** it will try with blank password during installation process
    # **************************************************************************
    #
    #db_root_user=root|SYS|postgres|sa|dba
    #db_host=host:port              # for DB_FLAVOR=MYSQL|POSTGRES|SQLA|MSSQL       #for example: db_host=localhost:3306
    #db_host=host:port:SID          # for DB_FLAVOR=ORACLE                          #for SID example: db_host=localhost:1521:ORCL
    #db_host=host:port/ServiceName  # for DB_FLAVOR=ORACLE                          #for Service example: db_host=localhost:1521/XE
    db_root_user=ranger
    db_root_password=rangerAdmin
    db_host=ranger-db
    #SSL config
    db_ssl_enabled=false
    db_ssl_required=false
    db_ssl_verifyServerCertificate=false
    #db_ssl_auth_type=1-way|2-way, where 1-way represents standard one way ssl authentication and 2-way represents mutual ssl authentication
    db_ssl_auth_type=2-way
    javax_net_ssl_keyStore=
    javax_net_ssl_keyStorePassword=
    javax_net_ssl_trustStore=
    javax_net_ssl_trustStorePassword=
    #
    # DB UserId used for the Ranger schema
    #
    db_name=ranger
    db_user=ranger
    db_password=rangerAdmin

    # change password. Password for below mentioned users can be changed only once using this property.
    #PLEASE NOTE :: Password should be minimum 8 characters with min one alphabet and one numeric.
    rangerAdmin_password=Rangeradmin1
    rangerTagsync_password=Rangeradmin1
    rangerUsersync_password=Rangeradmin1
    keyadmin_password=Rangeradmin1


    #Source for Audit Store. Currently solr and elasticsearch are supported.
    # * audit_store is solr
    audit_store=elasticsearch

    # * audit_solr_url Elasticsearch Host(s). E.g. 127.0.0.1
    audit_elasticsearch_urls=es-ranger
    audit_elasticsearch_port=9200
    audit_elasticsearch_protocol=http
    audit_elasticsearch_user=elastic
    audit_elasticsearch_password=elasticsearch
    audit_elasticsearch_index=ranger_audits
    audit_elasticsearch_bootstrap_enabled=true


    # * audit_solr_url URL to Solr. E.g. http://<solr_host>:6083/solr/ranger_audits
    audit_solr_urls=
    audit_solr_user=
    audit_solr_password=
    audit_solr_zookeepers=

    audit_solr_collection_name=ranger_audits
    #solr Properties for cloud mode
    audit_solr_config_name=ranger_audits
    audit_solr_no_shards=1
    audit_solr_no_replica=1
    audit_solr_max_shards_per_node=1
    audit_solr_acl_user_list_sasl=solr,infra-solr
    audit_solr_bootstrap_enabled=true

    #------------------------- DB CONFIG - END ----------------------------------

    #
    # ------- PolicyManager CONFIG ----------------
    #

    policymgr_external_url=http://ranger-admin:6080
    policymgr_http_enabled=true
    policymgr_https_keystore_file=
    policymgr_https_keystore_keyalias=rangeradmin
    policymgr_https_keystore_password=

    #Add Supported Components list below separated by semi-colon, default value is empty string to support all components
    #Example :  policymgr_supportedcomponents=hive,hbase,hdfs
    policymgr_supportedcomponents=

    #
    # ------- PolicyManager CONFIG - END ---------------
    #


    #
    # ------- UNIX User CONFIG ----------------
    #
    unix_user=ranger
    unix_user_pwd=ranger
    unix_group=ranger

    #
    # ------- UNIX User CONFIG  - END ----------------
    #
    #

    #
    # UNIX authentication service for Policy Manager
    #
    # PolicyManager can authenticate using UNIX username/password
    # The UNIX server specified here as authServiceHostName needs to be installed with ranger-unix-ugsync package.
    # Once the service is installed on authServiceHostName, the UNIX username/password from the host <authServiceHostName> can be used to login into policy manager
    #
    # ** The installation of ranger-unix-ugsync package can be installed after the policymanager installation is finished.
    #
    #LDAP|ACTIVE_DIRECTORY|UNIX|NONE
    authentication_method=NONE
    remoteLoginEnabled=true
    authServiceHostName=localhost
    authServicePort=5151
    ranger_unixauth_keystore=keystore.jks
    ranger_unixauth_keystore_password=password
    ranger_unixauth_truststore=cacerts
    ranger_unixauth_truststore_password=changeit

    ####LDAP settings - Required only if have selected LDAP authentication ####
    #
    # Sample Settings
    #
    #xa_ldap_url=ldap://127.0.0.1:389
    #xa_ldap_userDNpattern=uid={0},ou=users,dc=xasecure,dc=net
    #xa_ldap_groupSearchBase=ou=groups,dc=xasecure,dc=net
    #xa_ldap_groupSearchFilter=(member=uid={0},ou=users,dc=xasecure,dc=net)
    #xa_ldap_groupRoleAttribute=cn
    #xa_ldap_base_dn=dc=xasecure,dc=net
    #xa_ldap_bind_dn=cn=admin,ou=users,dc=xasecure,dc=net
    #xa_ldap_bind_password=
    #xa_ldap_referral=follow|ignore
    #xa_ldap_userSearchFilter=(uid={0})

    xa_ldap_url=ldap://openldap-svc.kubedata-openldap.svc.cluster.local:389
    xa_ldap_userDNpattern=uid={0},ou=People,dc=poc,dc=br
    xa_ldap_groupSearchBase=ou=Groups,dc=poc,dc=br
    xa_ldap_groupSearchFilter=(member=uid={0},ou=People,dc=poc,dc=br)
    xa_ldap_groupRoleAttribute=cn
    xa_ldap_base_dn=dc=poc,dc=br
    xa_ldap_bind_dn=
    xa_ldap_bind_password=
    xa_ldap_referral=follow
    xa_ldap_userSearchFilter=(uid={0})

    

    ####ACTIVE_DIRECTORY settings - Required only if have selected AD authentication ####
    #
    # Sample Settings
    #
    #xa_ldap_ad_domain=xasecure.net
    #xa_ldap_ad_url=ldap://127.0.0.1:389
    #xa_ldap_ad_base_dn=dc=xasecure,dc=net
    #xa_ldap_ad_bind_dn=cn=administrator,ou=users,dc=xasecure,dc=net
    #xa_ldap_ad_bind_password=
    #xa_ldap_ad_referral=follow|ignore
    #xa_ldap_ad_userSearchFilter=(sAMAccountName={0})

    xa_ldap_ad_domain=
    xa_ldap_ad_url=
    xa_ldap_ad_base_dn=
    xa_ldap_ad_bind_dn=
    xa_ldap_ad_bind_password=
    xa_ldap_ad_referral=
    xa_ldap_ad_userSearchFilter=

    #------------ Kerberos Config -----------------
    spnego_principal=
    spnego_keytab=
    token_valid=30
    cookie_domain=
    cookie_path=/
    admin_principal=
    admin_keytab=
    lookup_principal=
    lookup_keytab=
    hadoop_conf=/etc/hadoop/conf
    #
    #-------- SSO CONFIG - Start ------------------
    #
    sso_enabled=false
    sso_providerurl=https://127.0.0.1:8443/gateway/knoxsso/api/v1/websso
    sso_publickey=

    #
    #-------- SSO CONFIG - END ------------------

    # Custom log directory path
    RANGER_ADMIN_LOG_DIR=$PWD
    # PID file path
    RANGER_PID_DIR_PATH=/var/run/ranger

    # #################  DO NOT MODIFY ANY VARIABLES BELOW #########################
    #
    # --- These deployment variables are not to be modified unless you understand the full impact of the changes
    #
    ################################################################################
    XAPOLICYMGR_DIR=$PWD
    app_home=$PWD/ews/webapp
    TMPFILE=$PWD/.fi_tmp
    LOGFILE=$PWD/logfile
    LOGFILES="$LOGFILE"

    JAVA_BIN='java'
    JAVA_VERSION_REQUIRED='1.8'
    JAVA_ORACLE='Java(TM) SE Runtime Environment'

    ranger_admin_max_heap_size=1g
    #retry DB and Java patches after the given time in seconds.
    PATCH_RETRY_INTERVAL=120
    STALE_PATCH_ENTRY_HOLD_TIME=10

    #mysql_create_user_file=${PWD}/db/mysql/create_dev_user.sql
    mysql_core_file=db/mysql/optimized/current/ranger_core_db_mysql.sql
    mysql_audit_file=db/mysql/xa_audit_db.sql
    #mysql_asset_file=${PWD}/db/mysql/reset_asset.sql

    #oracle_create_user_file=${PWD}/db/oracle/create_dev_user_oracle.sql
    oracle_core_file=db/oracle/optimized/current/ranger_core_db_oracle.sql
    oracle_audit_file=db/oracle/xa_audit_db_oracle.sql
    #oracle_asset_file=${PWD}/db/oracle/reset_asset_oracle.sql
    #
    postgres_core_file=db/postgres/optimized/current/ranger_core_db_postgres.sql
    postgres_audit_file=db/postgres/xa_audit_db_postgres.sql
    #
    sqlserver_core_file=db/sqlserver/optimized/current/ranger_core_db_sqlserver.sql
    sqlserver_audit_file=db/sqlserver/xa_audit_db_sqlserver.sql
    #
    sqlanywhere_core_file=db/sqlanywhere/optimized/current/ranger_core_db_sqlanywhere.sql
    sqlanywhere_audit_file=db/sqlanywhere/xa_audit_db_sqlanywhere.sql
    cred_keystore_filename=$app_home/WEB-INF/classes/conf/.jceks/rangeradmin.jceks
    RANGER_ADMIN_LOGBACK_CONF_FILE=
  usersync_install.properties: |-
    # Licensed to the Apache Software Foundation (ASF) under one or more
    # contributor license agreements.  See the NOTICE file distributed with
    # this work for additional information regarding copyright ownership.
    # The ASF licenses this file to You under the Apache License, Version 2.0
    # (the "License"); you may not use this file except in compliance with
    # the License.  You may obtain a copy of the License at
    #
    #     http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.

    # The base path for the usersync process
    ranger_base_dir = /opt/ranger_usersync

    #
    # The following URL should be the base URL for connecting to the policy manager web application
    # For example:
    #
    #  POLICY_MGR_URL = http://policymanager.xasecure.net:6080
    #
    POLICY_MGR_URL = http://ranger-svc:6080

    # sync source,  only unix and ldap are supported at present
    # defaults to unix
    SYNC_SOURCE = ldap

    #
    # Minimum Unix User-id to start SYNC.
    # This should avoid creating UNIX system-level users in the Policy Manager
    #
    MIN_UNIX_USER_ID_TO_SYNC = 0

    # Minimum Unix Group-id to start SYNC.
    # This should avoid creating UNIX system-level users in the Policy Manager
    #
    MIN_UNIX_GROUP_ID_TO_SYNC = 0

    # sync interval in minutes
    # user, groups would be synced again at the end of each sync interval
    # defaults to 5   if SYNC_SOURCE is unix
    # defaults to 360 if SYNC_SOURCE is ldap
    SYNC_INTERVAL = 10

    #User and group for the usersync process
    unix_user=ranger
    unix_group=ranger

    #change password of rangerusersync user. Please note that this password should be as per rangerusersync user in ranger
    rangerUsersync_password=Rangeradmin1

    #Set to run in kerberos environment
    usersync_principal=
    usersync_keytab=
    hadoop_conf=/etc/hadoop/conf
    #
    # The file where all credential is kept in cryptic format
    #
    CRED_KEYSTORE_FILENAME=/opt/ranger_usersync/conf/rangerusersync.jceks

    # SSL Authentication
    AUTH_SSL_ENABLED=true
    AUTH_SSL_KEYSTORE_FILE=/opt/ranger_usersync/conf/cert/unixauthservice.jks
    AUTH_SSL_KEYSTORE_PASSWORD=UnIx529p
    AUTH_SSL_TRUSTSTORE_FILE=
    AUTH_SSL_TRUSTSTORE_PASSWORD=

    # ---------------------------------------------------------------
    # The following properties are relevant only if SYNC_SOURCE = ldap
    # ---------------------------------------------------------------

    # The below properties ROLE_ASSIGNMENT_LIST_DELIMITER, USERS_GROUPS_ASSIGNMENT_LIST_DELIMITER, USERNAME_GROUPNAME_ASSIGNMENT_LIST_DELIMITER,
    #and GROUP_BASED_ROLE_ASSIGNMENT_RULES can be used to assign role to LDAP synced users and groups
    #NOTE all the delimiters should have different values and the delimiters should not contain characters that are allowed in userName or GroupName

    # default value ROLE_ASSIGNMENT_LIST_DELIMITER = &
    ROLE_ASSIGNMENT_LIST_DELIMITER = &

    #default value USERS_GROUPS_ASSIGNMENT_LIST_DELIMITER = :
    USERS_GROUPS_ASSIGNMENT_LIST_DELIMITER = :

    #default value USERNAME_GROUPNAME_ASSIGNMENT_LIST_DELIMITER = ,
    USERNAME_GROUPNAME_ASSIGNMENT_LIST_DELIMITER = ,

    # with above mentioned delimiters a sample value would be ROLE_SYS_ADMIN:u:userName1,userName2&ROLE_SYS_ADMIN:g:groupName1,groupName2&ROLE_KEY_ADMIN:u:userName&ROLE_KEY_ADMIN:g:groupName&ROLE_USER:u:userName3,userName4&ROLE_USER:g:groupName3
    #&ROLE_ADMIN_AUDITOR:u:userName&ROLE_KEY_ADMIN_AUDITOR:u:userName&ROLE_KEY_ADMIN_AUDITOR:g:groupName&ROLE_ADMIN_AUDITOR:g:groupName
    GROUP_BASED_ROLE_ASSIGNMENT_RULES =

    # URL of source ldap
    # a sample value would be:  ldap://ldap.example.com:389
    # Must specify a value if SYNC_SOURCE is ldap
    SYNC_LDAP_URL = ldap://openldap-svc.kubedata-openldap.svc.cluster.local:389

    # ldap bind dn used to connect to ldap and query for users and groups
    # a sample value would be cn=admin,ou=users,dc=hadoop,dc=apache,dc=org
    # Must specify a value if SYNC_SOURCE is ldap
    SYNC_LDAP_BIND_DN = cn=usersync,ou=People,dc=poc,dc=br

    # ldap bind password for the bind dn specified above
    # please ensure read access to this file  is limited to root, to protect the password
    # Must specify a value if SYNC_SOURCE is ldap
    # unless anonymous search is allowed by the directory on users and group
    SYNC_LDAP_BIND_PASSWORD = usersync

    # ldap delta sync flag used to periodically sync users and groups based on the updates in the server
    # please customize the value to suit your deployment
    # default value is set to true when is SYNC_SOURCE is ldap
    SYNC_LDAP_DELTASYNC=false

    # search base for users and groups
    # sample value would be dc=hadoop,dc=apache,dc=org
    SYNC_LDAP_SEARCH_BASE = dc=poc,dc=br

    # search base for users
    # sample value would be ou=users,dc=hadoop,dc=apache,dc=org
    # overrides value specified in SYNC_LDAP_SEARCH_BASE
    SYNC_LDAP_USER_SEARCH_BASE = ou=People,dc=poc,dc=br

    # search scope for the users, only base, one and sub are supported values
    # please customize the value to suit your deployment
    # default value: sub
    SYNC_LDAP_USER_SEARCH_SCOPE = sub

    # objectclass to identify user entries
    # please customize the value to suit your deployment
    # default value: person
    SYNC_LDAP_USER_OBJECT_CLASS = inetOrgPerson

    # optional additional filter constraining the users selected for syncing
    # a sample value would be (dept=eng)
    # please customize the value to suit your deployment
    # default value is empty
    SYNC_LDAP_USER_SEARCH_FILTER =

    # attribute from user entry that would be treated as user name
    # please customize the value to suit your deployment
    # default value: cn
    SYNC_LDAP_USER_NAME_ATTRIBUTE = cn

    # attribute from user entry whose values would be treated as
    # group values to be pushed into Policy Manager database
    # You could provide multiple attribute names separated by comma
    # default value: memberof, ismemberof
    SYNC_LDAP_USER_GROUP_NAME_ATTRIBUTE = memberof

    USERSYNC_SYNC_GROUP_SEARCH_FIRST_ENABLED = True
    #
    # UserSync - Case Conversion Flags
    # possible values:  none, lower, upper
    SYNC_LDAP_USERNAME_CASE_CONVERSION=lower
    SYNC_LDAP_GROUPNAME_CASE_CONVERSION=lower

    #user sync log path
    logdir=/var/log/ranger/usersync
    #/var/log/ranger/usersync

    # PID DIR PATH
    USERSYNC_PID_DIR_PATH=/var/run/ranger

    # do we want to do ldapsearch to find groups instead of relying on user entry attributes
    # valid values: true, false
    # any value other than true would be treated as false
    # default value: false
    SYNC_GROUP_SEARCH_ENABLED=true

    # do we want to do ldapsearch to find groups instead of relying on user entry attributes and
    # sync memberships of those groups
    # valid values: true, false
    # any value other than true would be treated as false
    # default value: false
    SYNC_GROUP_USER_MAP_SYNC_ENABLED=true

    # search base for groups
    # sample value would be ou=groups,dc=hadoop,dc=apache,dc=org
    # overrides value specified in SYNC_LDAP_SEARCH_BASE,  SYNC_LDAP_USER_SEARCH_BASE
    # if a value is not specified, takes the value of  SYNC_LDAP_SEARCH_BASE
    # if  SYNC_LDAP_SEARCH_BASE is also not specified, takes the value of SYNC_LDAP_USER_SEARCH_BASE
    SYNC_GROUP_SEARCH_BASE=OU=Ranger,OU=Groups,dc=poc,dc=br

    # search scope for the groups, only base, one and sub are supported values
    # please customize the value to suit your deployment
    # default value: sub
    SYNC_GROUP_SEARCH_SCOPE=sub

    # objectclass to identify group entries
    # please customize the value to suit your deployment
    # default value: groupofnames
    SYNC_GROUP_OBJECT_CLASS=groupOfNames

    # optional additional filter constraining the groups selected for syncing
    # a sample value would be (dept=eng)
    # please customize the value to suit your deployment
    # default value is empty
    SYNC_LDAP_GROUP_SEARCH_FILTER=

    # attribute from group entry that would be treated as group name
    # please customize the value to suit your deployment
    # default value: cn
    SYNC_GROUP_NAME_ATTRIBUTE=cn

    # attribute from group entry that is list of members
    # please customize the value to suit your deployment
    # default value: member
    SYNC_GROUP_MEMBER_ATTRIBUTE_NAME=member

    # do we want to use paged results control during ldapsearch for user entries
    # valid values: true, false
    # any value other than true would be treated as false
    # default value: true
    # if the value is false, typical AD would not return more than 1000 entries
    SYNC_PAGED_RESULTS_ENABLED=

    # page size for paged results control
    # search results would be returned page by page with the specified number of entries per page
    # default value: 500
    SYNC_PAGED_RESULTS_SIZE=10
    #LDAP context referral could be ignore or follow
    SYNC_LDAP_REFERRAL =ignore


    # Custom by Kaden Cho
    #SYNC_USER_SEARCH_ENABLED=false
    #SYNC_GROUP_SEARCH_FIRST_ENABLED=true
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: ranger-cfg
 